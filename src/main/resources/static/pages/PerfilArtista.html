<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malfatti - Perfil do Artista</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .navbar {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .profile-banner {
      background-color: #e9ecef;
      height: 180px;
      position: relative;
      border-radius: 8px 8px 0 0;
      padding: 15px; 
    }

    .profile-img-container {
      position: absolute;
      bottom: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 150px;
      height: 150px;
      border-radius: 50%;
      overflow: hidden;
      border: 4px solid white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* Garante que a foto de perfil seja exibida corretamente */
.profile-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Estilo para a foto pequena na NavBar */
.profile-pic-nav {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

    .content-container {
      margin-top: 90px;
      padding: 0 15px;
    }

    .section-title {
      font-weight: bold;
      margin-top: 30px;
      color: #333;
      position: relative;
      padding-bottom: 10px;
    }
    
    .section-title:after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      height: 3px;
      width: 50px;
      background: #2575fc;
      border-radius: 10px;
    }

    .post-box {
      border: 2px dashed #ccc;
      text-align: center;
      padding: 3px;
      border-radius: 8px;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      cursor: pointer;
      transition: all 0.3s;
    }

    .post-box:hover {
      border-color: #0d6efd;
      background-color: #f0f7ff;
    }

    .file-input {
      display: none;
    }

    .upload-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #0d6efd;
    }

    .bg-white.shadow-sm.rounded {
      position: relative;
    }

    /* Adicione ao seu arquivo de estilo */
.profile-pic {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.dropdown-toggle::after {
  display: none !important;
}

.dropdown-menu {
  min-width: 120px;
  border: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.dropdown-item {
  padding: 8px 16px;
  font-size: 0.9rem;
}

.dropdown-item:hover {
  background-color: #f8f9fa;
}

.dropdown-item:active {
  background-color: #e9ecef;
}

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s, box-shadow 0.3s;
      aspect-ratio: 1/1;
    }
    
    .gallery-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    }

    .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }
    
    .gallery-item:hover .gallery-image {
      transform: scale(1.05);
    }

    .gallery-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 15px;
      transform: translateY(100%);
      transition: transform 0.3s;
    }
    
    .gallery-item:hover .gallery-overlay {
      transform: translateY(0);
    }

    .gallery-title {
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 1.1rem;
    }
    
    .gallery-description {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .gallery-tag {
      display: inline-block;
      background: rgba(37, 117, 252, 0.8);
      color: white;
      padding: 3px 8px;
      border-radius: 20px;
      font-size: 0.75rem;
      margin-top: 8px;
    }

    .remove-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      font-size: 12px;
      cursor: pointer;
      z-index: 10;
    }
    
    /* Subnav estilizada */
    .subnav {
      background-color: #fff;
      border-top: 1px solid #e9ecef;
      border-bottom: 1px solid #e9ecef;
      padding: 10px 0;
      margin-top: 15px;
    }
    
    .subnav .nav-link {
      color: #495057;
      font-weight: 500;
      padding: 8px 15px;
      border-radius: 20px;
      transition: all 0.3s;
    }
    
    .subnav .nav-link:hover, 
    .subnav .nav-link.active {
      color: #0d6efd;
      background-color: rgba(13, 110, 253, 0.1);
    }
    
    .profile-stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 15px;
    }
    
    .stat-item {
      text-align: center;
      font-size: 0.9rem;
    }
    
    .stat-number {
      font-weight: 700;
      font-size: 1.2rem;
    }
    
    .social-links {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .social-link {
      color: #495057;
      font-size: 1.5rem;
      transition: all 0.3s;
    }
    
    .social-link:hover {
      color: #0d6efd;
      transform: translateY(-3px);
    }
    
    .profile-content {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .bio-section {
      padding-bottom: 20px;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 20px;
    }
    
    .bio-title {
      font-weight: 600;
      color: #343a40;
      margin-bottom: 10px;
    }
    
    .bio-text {
      color: #495057;
      line-height: 1.6;
    }

    /* Estilos para o modal de publicação */
    .modal-content {
      border-radius: 10px;
      overflow: hidden;
    }
    
    .modal-header {
      border-bottom: none;
      padding: 15px 20px;
    }
    
    .modal-title {
      font-weight: bold;
      font-size: 1.2rem;
    }
    
    .nav-pills .nav-link {
      color: #495057;
      font-weight: 500;
      border-radius: 0;
      padding: 10px 20px;
    }
    
    .nav-pills .nav-link.active {
      color: #0d6efd;
      background-color: transparent;
      border-bottom: 3px solid #0d6efd;
    }
    
    .tab-content {
      padding: 20px;
    }
    
    .upload-area {
      border: 2px dashed #ccc;
      border-radius: 8px;
      padding: 40px 20px;
      text-align: center;
      background-color: #f8f9fa;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 20px;
    }
    
    .upload-area:hover {
      border-color: #0d6efd;
      background-color: #f0f7ff;
    }
    
    .upload-icon-large {
      font-size: 3rem;
      color: #0d6efd;
      margin-bottom: 15px;
    }
    
    .upload-text {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }
    
    .upload-subtext {
      color: #6c757d;
      font-size: 0.9rem;
    }
    
    .btn-select {
      background-color: #0d6efd;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 500;
      margin-top: 10px;
    }
    
    .btn-select:hover {
      background-color: #0b5ed7;
    }
    
    .preview-container {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .image-preview {
      max-width: 100%;
      max-height: 300px;
      border-radius: 8px;
      object-fit: contain;
    }
    
    .tag-input {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      padding: 8px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      background-color: white;
    }
    
    .tag {
      background-color: #e9ecef;
      padding: 3px 8px;
      border-radius: 20px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .tag-remove {
      cursor: pointer;
      color: #6c757d;
    }
    
    .tag-input input {
      border: none;
      outline: none;
      flex-grow: 1;
      min-width: 100px;
      padding: 5px;
    }
    
    /* Corrige o problema do modal-backdrop */
     body.modal-open {
      overflow: auto;
      padding-right: 0 !important;
    }
    
    .modal-backdrop {
      z-index: 1040;
    }
    
    .modal {
      z-index: 1050;
    }

    /* Ajustes para grid de publicações */
    #gallery-container .col-md-4 {
      margin-bottom: 20px;
    }

    /* Esconder seções não ativas */
    .content-section {
      display: none;
    }
    
    .content-section.active {
      display: block;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #6c757d;
      border: 2px dashed #e9ecef;
      border-radius: 8px;
      margin: 20px 0;
    }
    
    .empty-state i {
      font-size: 3rem;
      color: #dee2e6;
      margin-bottom: 15px;
    }
    
    .empty-state h5 {
      color: #495057;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .profile-actions-container {
      position: absolute;
      top: 200px;
      right: 15px;
      z-index: 10;
    }

    .navbar {
    position: relative;
    z-index: 1050; /* Maior que a maioria dos elementos da página */
}

    .navbar-nav .nav-link {
     transition: color 0.3s ease, transform 0.3s ease;
    }      


    .navbar-nav .nav-link:hover {
      color: #007bff;
      transform: translateY(-2px);
      font-weight: 500;
    }


    .icon-hover svg,
    .navbar a.text-dark svg {
        transition: transform 0.3s ease, color 0.3s ease;
    }


    .icon-hover:hover svg,
    .navbar a.text-dark:hover svg {
      transform: scale(1.2);
      color: #007bff;
    }

    @media (max-width: 768px) {
      .profile-banner {
        height: 150px;
      }

      .profile-img-container {
        width: 100px;
        height: 100px;
        bottom: -50px;
      }

      .content-container {
        margin-top: 70px;
        padding: 0 10px;
      }

      .upload-icon {
        font-size: 1.5rem;
      }

      .navbar-brand span {
        font-size: 1rem;
      }
      
      .subnav .nav-link {
        padding: 5px 10px;
        font-size: 0.85rem;
      }
      
      .stat-item {
        font-size: 0.8rem;
      }

      .profile-actions-container {
        top: 10px;
        right: 10px;
      }
      
      .btn-editar-perfil {
        padding: 6px 12px;
        font-size: 0.9rem;
      }
    }

    .btn-editar-perfil {
      border: 2px solid #000000;
      border-radius: 10px;
      color: #000000;
      text-decoration: none;
      padding: 8px 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background-color: white;
      transition: all 0.3s ease;
    }

    .btn-editar-perfil:hover {
      background-color: #f0f0f0;
      transform: translateY(-2px);
    }

    .banner {
      background-image: url('../imagens/CapaDeus.png');
      background-size: cover;
      background-position: center;
      height: 300px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      margin: 0 auto;
      color: white;
      padding: 20px;
      text-shadow: 2px 2px 4px #000;
    }


    .banner {
      background-image: url('../imagens/CapaDeus.png');
      background-size: cover;
      background-position: center;
      height: 300px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      margin: 0 auto;
      color: white;
      padding: 20px;
      text-shadow: 2px 2px 4px #000;
    }


    .categoria-container {
        display: flex;
        overflow-x: auto;
        scroll-behavior: smooth;
        gap: 10px;
        padding: 10px 0;
        scrollbar-width: none;  /* Firefox */
    }


    @media (max-width: 992px) {
      .categoria-container {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: 10px;
      }
    }

    @media (max-width: 768px) {
      .categoria-container {
        grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      }
      
      .categoria-btn {
        padding: 6px 8px;
        font-size: 0.85rem;
      }
    }

    @media (max-width: 576px) {
      .categoria-container {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .categoria-btn {
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .categoria-container {
        grid-template-columns: 1fr;
      }
    }


          .topbar-actions {
        display: flex;
        align-items: center;
        gap: 15px;
        }


        /* Botão Upgrade */
        .btn-upgrade {
        background-color: #0d0c22;
        color: white;
        border: none;
        border-radius: 25px;
        padding: 6px 18px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        }


        /* Botão Share Work */
        .btn-share {
        background-color: white;
        color: #0d0c22;
        border: 1px solid #ccc;
        border-radius: 25px;
        padding: 6px 18px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        }


        /* Ícones */
        .icon-btn {
        font-size: 20px;
        cursor: pointer;
        color: #0d0c22;
        }


        /* Perfil */
        .profile-wrapper {
        position: relative;
        }


        .profile-pic {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        }


        .status-dot {
        position: absolute;
        bottom: 2px;
        right: 2px;
        width: 8px;
        height: 8px;
        background-color: #00d084;
        border-radius: 50%;
        border: 2px solid white;
        }
   


    .artist-img {
      width: 250px;
      height: 250px;
      object-fit: cover;
      border-radius: 50%;
    }


    .card-img-top {
      height: 200px;
      object-fit: cover;
    }


    .publicar-section {
      background-image: url('../imagens/pixacao.png');
      background-size: cover;
      background-position: center;
      color: white;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      text-align: center;
      padding: 60px 20px;
    }


    .publicar-section .btn {
      margin-top: 20px;
    }


    .img-vertical {
      height: 300px;
      object-fit: cover;
    }


   


     .scrolling-wrapper {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    gap: 1rem;
    padding: 10px 0;
  }


  .artist-img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #fff;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s;
  }


  .artist-img:hover {
    transform: scale(1.05);
  }


  .recomedacao-card:hover {
    transform: scale(1.05);
  }


  /* Recomendações de Livros - efeito hover */
  #livrosCarousel .card {
    transition: transform 0.3s;
  }


  #livrosCarousel .card:hover {
    transform: scale(1.05);
    z-index: 2;
  }


  /* Recomendações de Albuns - efeito hover */
  #albunsCarousel .card {
    transition: transform 0.3s;
  }


  #albunsCarousel .card:hover {
    transform: scale(1.05);
    z-index: 2;
  }


  /* Recomendações de Fotografias - efeito hover */
  #FotoCarousel .me-3 img {
    transition: transform 0.3s;
  }


  #FotoCarousel .me-3 img:hover {
    transform: scale(1.05);
    z-index: 2;
  }


  /* Botões de seta */
  .scroll-btn {
    background-color: #fff;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    z-index: 2;
  }


  .scroll-btn:hover {
    background-color: #f0f0f0;
    transform: translateY(-50%) scale(1.1);
  }


  .scroll-btn.left {
    left: -20px;
  }


  .scroll-btn.right {
    right: -20px;
  }


  .carousel-container {
    position: relative;
  }

  .navbar {
    position: relative;
    z-index: 1050; /* Maior que a maioria dos elementos da página */
}
.dropdown-menu {
    z-index: 2000; /* Garantir que apareça sobre tudo */
}


    .navbar-nav .nav-link {
     transition: color 0.3s ease, transform 0.3s ease;
    }      


    .navbar-nav .nav-link:hover {
      color: #007bff;
      transform: translateY(-2px);
      font-weight: 500;
    }


    .icon-hover svg,
    .navbar a.text-dark svg {
        transition: transform 0.3s ease, color 0.3s ease;
    }


    .icon-hover:hover svg,
    .navbar a.text-dark:hover svg {
      transform: scale(1.2);
      color: #007bff;
    }

    /* Estilos para notificações e email */
    .notification-wrapper.dropdown {
      position: relative;
    }

    .notification-icon {
      position: relative;
      cursor: pointer;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #ff4757;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .notification-dropdown {
      width: 350px;
      max-height: 400px;
      overflow-y: auto;
      padding: 0;
    }

    .notification-item {
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    }

    .notification-item:hover {
      background-color: #f8f9fa;
    }

    .notification-item.unread {
      background-color: #f8f9fa;
    }

    .notification-time {
      font-size: 12px;
      color: #6c757d;
    }

    .email-icon, .notification-icon {
      font-size: 20px;
      color: #0d0c22;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .email-icon:hover, .notification-icon:hover {
      color: #007bff;
      transform: scale(1.2);
    }

    .topbar-icons {
      display: flex;
      align-items: center;
      gap: 15px;
    }


    .premium-section h2 {
      font-size: 2rem;
    }


    .premium-section ul li {
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }


    .premium-section .card-float {
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      border-radius: 15px;
      background-color: white;
    }


    .premium-section .card-float:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }


    .btn-assine {
      background-color: #0d6efd;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      transition: transform 0.3s ease;
      border-radius: 5px;
    }


    .plano-card {
      background-color: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      color: white;
    }


    .plano-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 20px rgba(255, 249, 249, 0.5);
    }




    .premium-section {
      background: linear-gradient(135deg, #26b7f5, #86d2ec, #2c5364);
      padding: 80px 0;
    }


   
    .plano-card:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
      border-color: #17c1e8;
    }


    .plano-card h4 {
      font-size: 1.8rem;
      color: #6e6e6e;
    }


    .plano-card ul li {
      margin-bottom: 10px;
      font-size: 1.05rem;
    }




    .btn-assinar {
      margin-top: 15px;
      font-weight: bold;
      border-radius: 30px;
      padding: 12px 30px;
      transition: background-color 0.3s, transform 0.2s;
    }


    .btn-assinar:hover {
      transform: translateY(-3px);
    }


    .btn-basic {
      background-color: transparent;
      border: 2px solid #17c1e8;
      color: #17c1e8;
    }


    .btn-basic:hover {
      background-color: #17c1e8;
      color: #fff;
    }


    .btn-premium {
      background: linear-gradient(90deg, #ff6a00, #ee0979);
      color: #fff;
      border: none;
    }


    .btn-premium:hover {
      background: linear-gradient(90deg, #ee0979, #ff6a00);
    }


    .dropdown-toggle::after {
        display: none !important;
    }


    .img-circular {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 50%;
    }


    .categoria-btn {
      border-radius: 50px;
      border: 1px solid #0d6efd;
      background-color: #f8f9fa;
      color: #0d6efd;
      padding: 8px 18px;
      font-weight: 500;
      transition: all 0.3s ease;
    }


    .categoria-btn:hover {
      background-color: #0d6efd;
      color: white;
      box-shadow: 0 4px 10px rgba(13, 110, 253, 0.3);
      transform: translateY(-2px);
    }


    .img-quadrada {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 50%;
    }


    .reel-card {
    width: 450px;
    height: 300px;
    background-color: #000;
    overflow: hidden;
    flex: 0 0 auto;
    border-radius: 1rem;
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    transition: transform 0.3s ease;
    position: relative;
  }


  .reel-card:hover {
    transform: scale(1.05);
  }


/* Estilo para a seção de eventos - Versão melhorada */
.img-eventos {
  transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}


.img-eventos:hover {
  cursor: pointer;
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}


/* Efeito no carrossel */
.img-eventos:hover .carousel {
  transform: scale(1.02);
}


.carousel {
  transition: transform 0.4s ease-out;
  border-radius: 12px;
  overflow: hidden;
}


.carousel-item img {
  transition: transform 0.5s ease;
}


.img-eventos:hover .carousel-item img {
  transform: scale(1.05);
}


/* Efeito na lista de eventos */
.list-group {
  border-radius: 12px !important;
  overflow: hidden;
}


.list-group-item {
  transition: all 0.3s ease;
  position: relative;
  padding-left: 20px;
  border-left: 4px solid transparent;
  background-color: #f8f9fa;
}


.list-group-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 0;
  transition: width 0.3s ease;
  z-index: 0;
}


.img-eventos:hover .list-group-item {
  padding-left: 25px;
  background-color: white;
}


.img-eventos:hover .list-group-item::before {
  width: 4px;
}


/* Efeito de overlay sutil */
.img-eventos::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.03) 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
  border-radius: 12px;
}


.img-eventos:hover::after {
  opacity: 1;
}


  .video-reel {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 1rem;
  }


    .video-info-card {
    position: absolute;
    bottom: -60px;
    left: 0;
    width: 100%;
    background: white;
    padding: 15px;
    border-radius: 0 0 1rem 1rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }


  .video-title {
    font-weight: bold;
    font-size: 1.2rem;
    margin-bottom: 5px;
  }


  .video-description {
    color: #666;
    font-size: 0.9rem;
  }


    .carousel-inner img {
      height: 200px;
      object-fit: cover;
    }


    .img-quadrada {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 10px;
    }


   
#artPreviewModal .modal-content {
  border-radius: 15px;
  }
  #artPreviewModal img {
  transition: transform 0.3s ease;
  }
  #artPreviewModal img:hover {
  transform: scale(1.02);
  }


  /* Margem e sombra da imagem/vídeo */
.preview-media-wrapper {
  padding: 10px;
  border: 2px solid #eee;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  background-color: #fff;
  max-width: 90%;
}


/* Botões circulares */
.btn-circle {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.3s ease;
}


.btn-like {
  background-color: #ff4b6e;
  color: white;
}


.btn-fav {
  background-color: #ffc107;
  color: white;
}


.btn-circle:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}


/* Botão de seguir com ícone + */
.btn-outline-primary i {
  font-size: 14px;
  vertical-align: middle;
}


/* Novos estilos para notificações e email */
    .notification-wrapper.dropdown {
      position: relative;
    }
    
    .notification-icon {
      position: relative;
      cursor: pointer;
    }
    
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #ff4757;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .notification-dropdown {
      width: 350px;
      max-height: 400px;
      overflow-y: auto;
      padding: 0;
    }
    
    .notification-item {
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    }
    
    .notification-item:hover {
      background-color: #f8f9fa;
    }
    
    .notification-item.unread {
      background-color: #f8f9fa;
    }
    
    .notification-time {
      font-size: 12px;
      color: #6c757d;
    }
   
    .email-icon, .notification-icon {
      font-size: 20px;
      color: #0d0c22;
      transition: all 0.3s ease;
      cursor: pointer;
    }
   
    .email-icon:hover, .notification-icon:hover {
      color: #007bff;
      transform: scale(1.2);
    }
   
    .topbar-icons {
      display: flex;
      align-items: center;
      gap: 15px;
    }


  .action-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #e5e7eb;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .action-circle i {
      transition: color 0.3s ease;
    }

    .action-circle.like i {
      color: #666;
    }

    .action-circle.like.active i {
      color: #dc3545;
    }

    .action-circle.fav i {
      color: #666;
    }

    .action-circle.fav.active i {
      color: #ffc107;
    }

    .action-circle:hover {
      background-color: #f8f9fa;
    }
/* Caixa da mídia: menor, quadrada, com borda/sombra (separação) */
.media-box{
  --size: 380px;                 /* ajuste fino aqui */
  width: min(100%, var(--size));
  aspect-ratio: 1 / 1;           /* quadrado */
  padding: 12px;
  border: 2px solid #eee;
  border-radius: 16px;
  background: #fff;
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  display: grid;
  place-items: center;
}
.media-box .media-el{
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
}

/* + Seguir: menor, pill, efeito de preencher no hover */
.btn-follow{
  padding: .25rem .6rem;
  border-width: 1px;
  transition: all .2s ease;
}
.btn-follow:hover{
  background: #0d6efd;
  color: #fff;
  box-shadow: 0 6px 16px rgba(13,110,253,.25);
  transform: translateY(-1px);
}


/* Responsivo: diminui o quadrado em telas pequenas */
@media (max-width: 576px){
  .media-box{ --size: 300px; }
}

  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light px-4">
  <div class="container-fluid">
    <!-- Logo + Nome -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="../imagens/logoNavBar.png" alt="Logo" style="width: 35px; margin-right: 10px;">
      <span class="fw-bold">Malfatti</span>
    </a>

    <!-- Botão hamburguer responsivo -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Itens colapsáveis -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown">
      <!-- Links centralizados -->
      <ul class="navbar-nav gap-3">
        <li class="nav-item"><a class="nav-link fw-semibold" href="TelaInicial.html">Início</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="TelaEventos.html">Eventos</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="#">Artistas</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="#">Obras</a></li>
        <li class="nav-item"><a class="nav-link fw-semibold" href="#">Entrar</a></li>
      </ul>
    </div>

    <!-- Ícones de notificação, email e perfil - CORRIGIDO -->
    <div class="topbar-icons">
      <!-- Ícone de Email/Chat -->
      <a href="TelaBatePapo.html" class="email-icon me-3">
        <i class="bi bi-envelope fs-5"></i>
      </a>
     
      <!-- Dropdown de Notificações - ESTRUTURA CORRIGIDA -->
      <div class="notification-wrapper dropdown me-3">
        <a class="notification-icon dropdown-toggle" href="#" role="button" id="notificationDropdown" 
           data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-bell fs-5"></i>
          <span class="notification-badge">3</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end notification-dropdown" aria-labelledby="notificationDropdown">
          <li>
            <h6 class="dropdown-header">Notificações</h6>
          </li>
          <li>
            <div class="notification-item unread">
              <div class="d-flex justify-content-between">
                <strong>Novo seguidor</strong>
                <small class="notification-time">2 min atrás</small>
              </div>
              <p>Ana Rodrigues começou a seguir você</p>
            </div>
          </li>
          <li>
            <div class="notification-item unread">
              <div class="d-flex justify-content-between">
                <strong>Evento próximo</strong>
                <small class="notification-time">1 hora atrás</small>
              </div>
              <p>Romeu e Julieta começa em 2 dias</p>
            </div>
          </li>
          <li>
            <div class="notification-item">
              <div class="d-flex justify-content-between">
                <strong>Novo comentário</strong>
                <small class="notification-time">5 horas atrás</small>
              </div>
              <p>Carlos comentou na sua obra</p>
            </div>
          </li>
          <li>
            <div class="notification-item">
              <div class="d-flex justify-content-between">
                <strong>Recomendação</strong>
                <small class="notification-time">Ontem</small>
              </div>
              <p>Novos artistas para você seguir</p>
            </div>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li>
            <a class="dropdown-item text-center text-primary" href="#">
              Ver todas as notificações
            </a>
          </li>
        </ul>
      </div>
     
      <!-- Dropdown de perfil -->
      <div class="dropdown">
        <a href="#" class="text-dark dropdown-toggle" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <span id="profile-icon">
            <!-- Ícone padrão (será substituído se houver foto) -->
            <i class="bi bi-person-circle fs-5"></i>
          </span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item" href="PerfilArtista.html">Perfil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">Sair</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

  <div class="container my-4">
  <!-- Banner e imagem de perfil -->
   <!-- Substitua a seção do banner e perfil por este código: -->
<div class="bg-white shadow-sm rounded">
  <div class="profile-banner">
    <div class="profile-img-container">
      <img id="profile-picture" src="../imagens/modelorosto.jpg" class="profile-img" />
    </div>
  </div>

  <div class="profile-actions-container">
    <a class="btn2 btn-editar-perfil profile-action-item" href="EditarPerfilArtista.html">
      <svg xmlns="http://www.w3.org/2000/svg" width="19" height="20" viewBox="0 0 19 20" fill="none" role="img" aria-hidden="true" class="icon">
        <path d="M9.49998 16.3337H16.625M2.375 16.3337H3.70068C4.08795 16.3337 4.28158 16.3337 4.4638 16.2899C4.62536 16.2511 4.77981 16.1872 4.92147 16.1004C5.08126 16.0024 5.21818 15.8655 5.49202 15.5917L15.4375 5.64618C16.0934 4.99034 16.0934 3.92701 15.4375 3.27117C14.7817 2.61534 13.7184 2.61534 13.0625 3.27118L3.117 13.2167C2.84316 13.4905 2.70624 13.6274 2.60832 13.7872C2.52151 13.9289 2.45753 14.0833 2.41875 14.2449C2.375 14.4271 2.375 14.6207 2.375 15.008V16.3337Z" stroke="currentColor" stroke-width="1.58333" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
      Editar Perfil
    </a>
  </div>

    <div class="container content-container text-center">
    <h4 class="fw-bold" id="profile-name">Carregando...</h4>
    <!-- Estatísticas -->
    <div class="profile-stats">
      <div class="stat-item">
        <div class="stat-number">24</div>
        <div>Obras</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">1.2k</div>
        <div>Seguidores</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">120</div>
        <div>Seguindo</div>
      </div>
    </div>

    
    
    <!-- Links sociais -->
    <div class="social-links">
      <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
      <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
      <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
    </div>

    <!-- Subnav -->
    <div class="subnav">
      <ul class="nav justify-content-center">
        <li class="nav-item"><a class="nav-link active" href="#" data-section="publications"><i class="fas fa-image me-2"></i> Publicações</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="post"><i class="fas fa-palette me-2"></i> Postar</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="events"><i class="fas fa-calendar-alt me-2"></i> Eventos</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="reviews"><i class="fas fa-trophy me-2"></i> Avaliações</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="collections"><i class="fas fa-bookmark me-2"></i> Coleções</a></li>
      </ul>
    </div>
    
    <!-- Conteúdo do perfil -->
    <div class="profile-content">
      <div class="bio-section">
      <div class="bio-title">Biografia</div>
      <div class="bio-text" id="profile-bio">Carregando biografia...</div>
    </div>
    </div>
      
      <!-- Seção de Publicações (ativa por padrão) -->
      <div id="publications-section" class="content-section active">
        <h5 class="section-title text-start">Publicações</h5>
        <div class="row g-4" id="gallery-container">
          <!-- As publicações serão carregadas aqui -->
        </div>
      </div>
      
      <!-- Seção de Postar -->
      <div id="post-section" class="content-section">
  <h5 class="section-title text-start">Criar Nova Publicação</h5>
  <div class="mb-3">
    <div id="open-publication-modal" class="post-box w-100">
      <div>
        <div class="upload-icon">+</div>
        <div>Adicionar Publicações</div>
      </div>
    </div>
  </div>
</div>
      
      <!-- Seção de Eventos -->
      <div id="events-section" class="content-section">
        <h5 class="section-title text-start">Eventos</h5>
        <div class="empty-state">
          <i class="fas fa-calendar-alt"></i>
          <h5>Nenhum evento encontrado</h5>
          <p>Você ainda não tem eventos cadastrados</p>
        </div>
      </div>
      
      <!-- Seção de Avaliações -->
      <div id="reviews-section" class="content-section">
        <h5 class="section-title text-start">Avaliações</h5>
        <div class="empty-state">
          <i class="fas fa-trophy"></i>
          <h5>Nenhuma avaliação encontrada</h5>
          <p>Você ainda não recebeu avaliações</p>
        </div>
      </div>
      
      <!-- Seção de Coleções -->
      <div id="collections-section" class="content-section">
        <h5 class="section-title text-start">Coleções</h5>
        <div class="empty-state">
          <i class="fas fa-bookmark"></i>
          <h5>Nenhuma coleção encontrada</h5>
          <p>Você ainda não criou coleções</p>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>

  <!-- Modal de Publicação -->
  <div class="modal fade" id="publicationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Nova Publicação</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="pills-image-tab" data-bs-toggle="pill" data-bs-target="#pills-image" type="button" role="tab">Imagem</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-details-tab" data-bs-toggle="pill" data-bs-target="#pills-details" type="button" role="tab" disabled>Detalhes</button>
            </li>
          </ul>
          <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-image" role="tabpanel" tabindex="0">
              <div class="upload-area" id="uploadArea">
                <div class="upload-icon-large">
                  <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">Arraste e solte uma imagem aqui</div>
                <div class="upload-subtext">ou</div>
                <button class="btn btn-select">Selecionar do computador</button>
                <input type="file" id="imageFile" accept="image/*" style="display: none;">
              </div>
              <div class="preview-container" id="previewContainer" style="display: none;">
                <img id="imagePreview" class="image-preview" alt="Pré-visualização">
              </div>
              <div class="d-flex justify-content-end">
                <button class="btn btn-primary" id="nextStepBtn" disabled>Próximo</button>
              </div>
            </div>
            <div class="tab-pane fade" id="pills-details" role="tabpanel" tabindex="0">
              <div class="mb-3">
                <label for="publicationTitle" class="form-label">Título</label>
                <input type="text" class="form-control" id="publicationTitle" placeholder="Título da publicação">
              </div>
              <div class="mb-3">
                <label for="publicationDescription" class="form-label">Descrição</label>
                <textarea class="form-control" id="publicationDescription" rows="3" placeholder="Adicione uma descrição..."></textarea>
              </div>
              <div class="mb-3">
                <label class="form-label">Tags</label>
                <div class="tag-input" id="tagInput">
                  <!-- Tags serão adicionadas aqui -->
                  <input type="text" id="tagField" placeholder="Adicione tags (pressione Enter)">
                </div>
                <div class="form-text">Separe as tags com vírgulas ou pressione Enter</div>
              </div>
              <div class="d-flex justify-content-end gap-2">
                <button class="btn btn-outline-secondary" id="prevStepBtn">Voltar</button>
                <button class="btn btn-primary" id="publishBtn">Postar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let selectedImage = null;
    let tags = [];
    let publicationModal = null;
    let isPosting = false; // Flag para evitar postagem duplicada

    // Abrir o modal ao clicar no botão de adicionar publicação
    document.addEventListener('DOMContentLoaded', function() {
      publicationModal = new bootstrap.Modal(document.getElementById('publicationModal'));
      searchPublications();
      
      // Navegação entre seções
      document.querySelectorAll('.subnav .nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove a classe active de todos os links
          document.querySelectorAll('.subnav .nav-link').forEach(navLink => {
            navLink.classList.remove('active');
          });
          
          // Adiciona a classe active apenas ao link clicado
          this.classList.add('active');
          
          // Esconde todas as seções de conteúdo
          document.querySelectorAll('.content-section').forEach(section => {
            section.classList.remove('active');
          });
          
          // Mostra apenas a seção correspondente
          const sectionId = this.getAttribute('data-section') + '-section';
          document.getElementById(sectionId).classList.add('active');
        });
      });

      // Abrir modal de publicação apenas na seção de postar
      document.getElementById('post-section').addEventListener('click', function(e) {
        if (e.target.closest('.post-box') || e.target.closest('.file-input')) {
          publicationModal.show();
        }
      });

      // Corrigir o clique no botão "Selecionar do computador"
      document.querySelector('.btn-select').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('imageFile').click();
      });

      // Evento para selecionar imagem
      document.getElementById('imageFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(event) {
            selectedImage = event.target.result;
            document.getElementById('imagePreview').src = selectedImage;
            document.getElementById('previewContainer').style.display = 'block';
            document.getElementById('nextStepBtn').disabled = false;
          };
          reader.readAsDataURL(file);
        }
      });

      // Publicar
      document.getElementById('publishBtn').addEventListener('click', function() {
        // Evitar postagem duplicada
        if (isPosting) return;
        isPosting = true;
        
        const title = document.getElementById('publicationTitle').value.trim();
        const description = document.getElementById('publicationDescription').value.trim();
        
        if (!title) {
          alert('Por favor, adicione um título');
          isPosting = false;
          return;
        }
        
        fetch('http://localhost:8080/api/trabalhos', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            "arquivo": selectedImage,
            "nome": title,
            "descricao": description
          })
        })
        .then(response => response.json())
        .then(data => {
          publicationModal.hide();
          resetModal();
          searchPublications();

          // Voltar para a seção de publicações após postar
          document.querySelector('.subnav .nav-link[data-section="publications"]').click();

          updateStats();
        })
        .catch(error => console.error(error))
        .finally(() => {
          isPosting = false; // Resetar flag após a postagem
        });
      });

      // Resetar o modal quando fechado
      document.getElementById('publicationModal').addEventListener('hidden.bs.modal', function() {
        resetModal();
        // Forçar remoção do backdrop se necessário
        const backdrops = document.getElementsByClassName('modal-backdrop');
        while(backdrops.length > 0) {
          document.body.removeChild(backdrops[0]);
        }
        document.body.style.overflow = 'auto';
        document.body.style.paddingRight = '0';
      });

      // Habilitar arrastar e soltar
      const uploadArea = document.getElementById('uploadArea');
      
      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.style.borderColor = '#0d6efd';
        this.style.backgroundColor = '#f0f7ff';
      });
      
      uploadArea.addEventListener('dragleave', function() {
        this.style.borderColor = '#ccc';
        this.style.backgroundColor = '#f8f9fa';
      });
      
      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        this.style.borderColor = '#ccc';
        this.style.backgroundColor = '#f8f9fa';
        
        const file = e.dataTransfer.files[0];
        if (file && file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(event) {
            selectedImage = event.target.result;
            document.getElementById('imagePreview').src = selectedImage;
            document.getElementById('previewContainer').style.display = 'block';
            document.getElementById('nextStepBtn').disabled = false;
          };
          reader.readAsDataURL(file);
        }
      });

      // Navegação entre as abas
      document.getElementById('nextStepBtn').addEventListener('click', function() {
        document.getElementById('pills-details-tab').disabled = false;
        document.getElementById('pills-details-tab').click();
      });

      document.getElementById('prevStepBtn').addEventListener('click', function() {
        document.getElementById('pills-image-tab').click();
      });

      // Gerenciamento de tags
      document.getElementById('tagField').addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ',') {
          e.preventDefault();
          const tagText = this.value.trim();
          if (tagText) {
            addTag(tagText);
            this.value = '';
          }
        }
      });
    });

    function addTag(tagText) {
      // Limpa a tag de espaços extras e verifica se já existe
      const cleanTag = tagText.trim();
      if (cleanTag && !tags.includes(cleanTag)) {
        tags.push(cleanTag);
        renderTags();
      }
    }

    function removeTag(tagText) {
      tags = tags.filter(tag => tag !== tagText);
      renderTags();
    }

    function renderTags() {
      const tagInput = document.getElementById('tagInput');
      // Remove todas as tags atuais (exceto o input)
      const children = Array.from(tagInput.children);
      children.forEach(child => {
        if (child.tagName !== 'INPUT') {
          tagInput.removeChild(child);
        }
      });
      
      // Adiciona as tags
      tags.forEach(tag => {
        const tagElement = document.createElement('div');
        tagElement.className = 'tag';
        tagElement.innerHTML = `
          ${tag}
          <span class="tag-remove" onclick="removeTag('${tag.replace(/'/g, "\\'")}')">×</span>
        `;
        tagInput.insertBefore(tagElement, document.getElementById('tagField'));
      });
    }

    function resetModal() {
      selectedImage = null;
      tags = [];
      document.getElementById('imagePreview').src = '';
      document.getElementById('previewContainer').style.display = 'none';
      document.getElementById('nextStepBtn').disabled = true;
      document.getElementById('publicationTitle').value = '';
      document.getElementById('publicationDescription').value = '';
      document.getElementById('tagField').value = '';
      document.getElementById('pills-image-tab').click();
      document.getElementById('pills-details-tab').disabled = true;
      renderTags(); // Limpa as tags
    }

    function searchPublications(count = false) {
      fetch('http://localhost:8080/api/trabalhos', {
        method: 'GET',
        headers: { 'Content-Type': 'application/json' },
      })
      .then(response => response.json())
      .then(data => {
        if (count) {
          return data.length;
        }
        data = data.sort((a, b) => b.id - a.id); 
        renderPublications(data);
      })
    }
    // Renderizar publicações na página
    function renderPublications(data) {
      const galleryContainer = document.getElementById('gallery-container');
      galleryContainer.innerHTML = '';

      if (data.length === 0) {
        galleryContainer.innerHTML = `
          <div class="col-12">
            <div class="empty-state">
              <i class="fas fa-image"></i>
              <h5>Nenhuma publicação ainda</h5>
              <p>Você ainda não fez nenhuma publicação</p>
            </div>
          </div>
        `;
        return;
      }
      
      data.forEach(pub => {
        // Alterado para col-md-4 para mostrar 3 por linha
        const col = document.createElement('div');
        col.className = 'col-12 col-md-4 col-lg-4';
        
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        
        galleryItem.innerHTML = `
          <img src="${pub.arquivo}" class="gallery-image" alt="${pub.title}">
          <div class="gallery-overlay">
            <div class="gallery-title">${pub.nome}</div>
            <div class="gallery-description">${pub.descricao}</div>
            ${pub.tags?.map(tag => `<span class="gallery-tag">${tag}</span>`).join('') ?? ''}
          </div>
        `;
        
        col.appendChild(galleryItem);
        galleryContainer.appendChild(col);
      });

      updateStats();
    }

    function updateStats() {
      // Atualiza o número de obras com base no número de publicações
      const obrasCount = document.querySelector('.stat-item:first-child .stat-number');
      obrasCount.textContent = searchPublications(true);
      
      // Você pode adicionar outras atualizações de estatísticas aqui se necessário
    }

    // Carregar dados do usuário
  // Função para carregar os dados do perfil
function loadProfileData() {
  const usuarioLogadoString = localStorage.getItem('usuarioLogado');
  console.log('localStorage usuarioLogado:', usuarioLogadoString); // Debug

  if (!usuarioLogadoString) {
    console.log('Nenhum usuário logado encontrado, redirecionando para login'); // Debug
    window.location.href = 'Login.html';
    return;
  }

  let usuarioLogado;
  try {
    usuarioLogado = JSON.parse(usuarioLogadoString);
    console.log('Usuário logado parseado:', usuarioLogado); // Debug
  } catch (error) {
    console.error('Erro ao fazer parse do usuário logado:', error);
    localStorage.removeItem('usuarioLogado');
    window.location.href = 'Login.html';
    return;
  }

  if (!usuarioLogado || !usuarioLogado.id) {
    console.log('Usuário logado inválido, redirecionando para login'); // Debug
    localStorage.removeItem('usuarioLogado');
    window.location.href = 'Login.html';
    return;
  }

  console.log('Buscando dados do usuário ID:', usuarioLogado.id); // Debug

  // Buscar dados completos do usuário via API
  fetch(`http://localhost:8080/api/usuarios/id/${usuarioLogado.id}`)
    .then(response => {
      if (!response.ok) {
        throw new Error('Erro ao buscar dados do usuário');
      }
      return response.json();
    })
    .then(usuario => {
      console.log('Dados recebidos da API:', usuario); // Debug

      // Verificar se o usuário recebido é o mesmo que está no localStorage
      if (usuario.id !== usuarioLogado.id) {
        console.warn('ID do usuário da API diferente do localStorage!', {
          localStorage: usuarioLogado.id,
          api: usuario.id
        });
      }

      // Atualizar localStorage com dados mais recentes
      localStorage.setItem('usuarioLogado', JSON.stringify(usuario));

      // Atualizar foto de perfil
      if (usuario.fotoPerfil) {
        let fotoSrc = usuario.fotoPerfil;

        // Se não é base64, assumir que é um caminho e construir URL completa
        if (!fotoSrc.startsWith('data:')) {
          fotoSrc = `http://localhost:8080/${fotoSrc.replace(/\\/g, '/')}`;
          console.log('URL da foto construída:', fotoSrc); // Debug
        }

        document.getElementById('profile-picture').src = fotoSrc;
      } else {
        // Usar imagem padrão se não houver foto
        document.getElementById('profile-picture').src = '../imagens/modelorosto.jpg';
      }

      // Atualizar nome
      document.getElementById('profile-name').textContent = usuario.nome || 'Nome não definido';

      // Atualizar biografia
      document.getElementById('profile-bio').textContent = usuario.biografia || 'Biografia não definida';

      // Atualizar outras informações conforme necessário
      if (usuario.areaPrincipal) {
        // Exemplo: atualizar área principal
      }

      // Atualizar contagem de obras
      fetch(`http://localhost:8080/api/trabalhos/usuario/${usuario.id}/count`)
        .then(response => {
          if (!response.ok) {
            throw new Error('Erro ao buscar contagem de trabalhos');
          }
          return response.json();
        })
        .then(count => {
          console.log('Contagem de obras:', count); // Debug
          document.querySelector('.stat-item:first-child .stat-number').textContent = count;
        })
        .catch(error => {
          console.error('Erro ao carregar contagem de trabalhos:', error);
          document.querySelector('.stat-item:first-child .stat-number').textContent = '0';
        });
    })
    .catch(error => {
      console.error('Erro ao carregar dados do perfil:', error);
      // Se houver erro, tentar usar dados do localStorage como fallback
      const usuarioLocal = JSON.parse(localStorage.getItem('usuarioLogado'));
      if (usuarioLocal) {
        document.getElementById('profile-name').textContent = usuarioLocal.nome || 'Nome não definido';
        document.getElementById('profile-bio').textContent = usuarioLocal.biografia || 'Biografia não definida';
        if (usuarioLocal.fotoPerfil) {
          let fotoSrc = usuarioLocal.fotoPerfil;

          // Se não é base64, assumir que é um caminho e construir URL completa
          if (!fotoSrc.startsWith('data:')) {
            fotoSrc = `http://localhost:8080/${fotoSrc.replace(/\\/g, '/')}`;
          }

          document.getElementById('profile-picture').src = fotoSrc;
        }
      }
    });
}

// Carregar dados quando a página for aberta
document.addEventListener('DOMContentLoaded', function() {
    // Verificar se há parâmetro de refresh (vindo de cadastro)
    const urlParams = new URLSearchParams(window.location.search);
    const isRefresh = urlParams.get('refresh');

    if (isRefresh) {
        console.log('Página carregada após cadastro - forçando atualização completa'); // Debug
        // Aguardar um pouco para garantir que o localStorage foi atualizado
        setTimeout(() => {
            loadProfileData();
        }, 500);
    } else {
        loadProfileData();
    }
});

// Função de debug (temporária) - pode ser removida depois
function debugLocalStorage() {
    const usuarioLogado = localStorage.getItem('usuarioLogado');
    const idUsuario = localStorage.getItem('idUsuario');
    console.log('=== DEBUG LOCALSTORAGE ===');
    console.log('usuarioLogado:', usuarioLogado);
    console.log('idUsuario:', idUsuario);
    if (usuarioLogado) {
        const usuario = JSON.parse(usuarioLogado);
        console.log('ID do usuário parseado:', usuario.id);
        console.log('Nome do usuário:', usuario.nome);
    }
    console.log('========================');
}

// Adicionar função ao window para poder chamar no console
window.debugLocalStorage = debugLocalStorage;

// Atualizar também quando o perfil for editado
window.addEventListener('storage', (event) => {
  if (event.key === 'usuarioLogado') {
    loadProfileData();
  }
});

// Atualizar quando a página ganhar foco (útil quando usuário volta de outra aba após login/cadastro)
window.addEventListener('focus', () => {
  loadProfileData();
});

// Atualizar quando a página ficar visível (para casos de mudança de aba)
document.addEventListener('visibilitychange', () => {
  if (!document.hidden) {
    loadProfileData();
  }
});

// ===== JAVASCRIPT DA NAVBAR =====

// Script para simular o funcionamento das notificações
document.addEventListener('DOMContentLoaded', function() {
  // Simular clique nas notificações
  const notificationItems = document.querySelectorAll('.notification-item');
  notificationItems.forEach(item => {
    item.addEventListener('click', function() {
      this.classList.remove('unread');
      updateNotificationCount();
    });
  });

  // Atualizar contador de notificações
  function updateNotificationCount() {
    const unreadCount = document.querySelectorAll('.notification-item.unread').length;
    const badge = document.querySelector('.notification-badge');
    badge.textContent = unreadCount;

    if(unreadCount === 0) {
      badge.style.display = 'none';
    } else {
      badge.style.display = 'flex';
    }
  }

  // Verificar se há usuário logado e atualizar a NavBar
  const usuarioLogadoString = localStorage.getItem('usuarioLogado');
  let usuarioLogado = null;

  if (usuarioLogadoString) {
    try {
      usuarioLogado = JSON.parse(usuarioLogadoString);
      console.log('Usuário logado detectado na NavBar:', usuarioLogado);

      // Atualizar foto de perfil na NavBar se existir
      if (usuarioLogado.fotoPerfil) {
        const profileIcon = document.getElementById('profile-icon');
        if (profileIcon) {
          profileIcon.innerHTML = `<img src="${usuarioLogado.fotoPerfil}" class="profile-pic-nav" alt="Foto do perfil">`;
        }
      }

      // Esconder link "Entrar" na NavBar
      const entrarLink = document.querySelector('.navbar-nav .nav-link[href="#"]');
      if (entrarLink && entrarLink.textContent.trim() === 'Entrar') {
        entrarLink.style.display = 'none';
      }
    } catch (error) {
      console.error('Erro ao parsear usuário logado na NavBar:', error);
    }
  }

  // Logout
  document.getElementById('logoutBtn')?.addEventListener('click', function(e) {
    e.preventDefault();
    localStorage.removeItem('usuarioLogado');
    localStorage.removeItem('idUsuario');
    localStorage.removeItem('emailUsuario');
    window.location.href = 'TelaInicial.html';
  });
});
  </script>

</body>
</html>